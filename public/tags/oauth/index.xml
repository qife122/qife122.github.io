<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>OAuth on 办公AI智能小助手</title>
        <link>http://localhost:1313/tags/oauth/</link>
        <description>Recent content in OAuth on 办公AI智能小助手</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>qife</copyright>
        <lastBuildDate>Sun, 03 Aug 2025 19:24:40 +0800</lastBuildDate><atom:link href="http://localhost:1313/tags/oauth/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>揭秘Pokemon Go过度获取Google账户权限的技术内幕</title>
        <link>http://localhost:1313/p/%E6%8F%AD%E7%A7%98pokemon-go%E8%BF%87%E5%BA%A6%E8%8E%B7%E5%8F%96google%E8%B4%A6%E6%88%B7%E6%9D%83%E9%99%90%E7%9A%84%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95/</link>
        <pubDate>Sun, 03 Aug 2025 19:24:40 +0800</pubDate>
        
        <guid>http://localhost:1313/p/%E6%8F%AD%E7%A7%98pokemon-go%E8%BF%87%E5%BA%A6%E8%8E%B7%E5%8F%96google%E8%B4%A6%E6%88%B7%E6%9D%83%E9%99%90%E7%9A%84%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95/</guid>
        <description>&lt;h1 id=&#34;为何今天我没抓到任何精灵---trail-of-bits技术调查&#34;&gt;为何今天我没抓到任何精灵 - Trail of Bits技术调查
&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Dan Guido&lt;/strong&gt;&lt;br&gt;
2016年7月11日&lt;br&gt;
apple, authentication, privacy&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; 当全网疯狂时，我们展开了技术调查。以下是关于Pokemon Go申请Google账户权限的技术笔记。&lt;/p&gt;
&lt;h2 id=&#34;调查过程&#34;&gt;调查过程
&lt;/h2&gt;&lt;p&gt;今天下午6点左右，我和Jay展开了以下技术工作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;确认Pokemon Go实际请求的权限&lt;/li&gt;
&lt;li&gt;研究这些权限的真实功能&lt;/li&gt;
&lt;li&gt;在测试应用中复现权限获取&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;逆向工程分析&#34;&gt;逆向工程分析
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plaintext&#34; data-lang=&#34;plaintext&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;email
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://www.google.com/accounts/OAuthLogin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://www.googleapis.com/auth/userinfo.email
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;其中&lt;code&gt;OAuthLogin&lt;/code&gt;scope异常突出，该权限通常仅限Google自家应用（如Chrome和iOS账户管理器）使用。我们在Github上仅发现少数项目使用它。&lt;/p&gt;
&lt;h3 id=&#34;oauth技术验证&#34;&gt;OAuth技术验证
&lt;/h3&gt;&lt;p&gt;通过Google官方OAuth Playground测试时，该scope会返回&amp;quot;未授权&amp;quot;错误，说明Playground无法复现Pokemon Go的权限请求。这可能是Google 2012年弃用、2015年关闭的OAuth 1.0 API残留。但令人困惑的是，已迁移到OAuth 2.0的账户按理不应再能使用旧版API。&lt;/p&gt;
&lt;h2 id=&#34;安全缺陷分析&#34;&gt;安全缺陷分析
&lt;/h2&gt;&lt;p&gt;Pokemon Go登录流程存在三大问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;未明确告知请求的权限内容&lt;/li&gt;
&lt;li&gt;用户撤销权限后会自动重新启用&lt;/li&gt;
&lt;li&gt;现有文档未充分说明令牌权限含义&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;虽然Niantic声称只需要基础资料，但通过&lt;code&gt;UberAuth&lt;/code&gt;令牌可升级获取包括Gmail在内的全账户访问权限（详见&lt;a class=&#34;link&#34; href=&#34;https://gist.github.com/arirubinstein/fd5453537436a8757266f908c3e41538&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;技术细节&lt;/a&gt;）。&lt;/p&gt;
&lt;h2 id=&#34;厂商响应与解决方案&#34;&gt;厂商响应与解决方案
&lt;/h2&gt;&lt;p&gt;Niantic最终承认错误并发布声明：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;iOS版Pokemon GO错误地请求了Google账户的完全访问权限&amp;hellip;实际上仅访问基本资料信息&amp;hellip;正在通过客户端更新修正权限请求&amp;rdquo;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Google将采取两项措施：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对已发放的令牌进行降权&lt;/li&gt;
&lt;li&gt;阻止新用户授予过度权限&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;建议用户&lt;/strong&gt;：立即在Google安全设置中撤销Pokemon Go权限，登出后重新登录以获取修正后的权限。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;更新记录&lt;/em&gt;&lt;br&gt;
2016/7/12：确认&amp;quot;UberAuth&amp;quot;令牌可通过未公开方法升级获取全账户权限&lt;br&gt;
2016/7/13：应用已更新为仅请求基础权限&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
