```markdown
---
date: 2025-08-06T21:08:33+08:00
title: "2029年大选技术架构解析：ASP.NET Core与Google云服务实战"
tags: [云计算, ASP.NET, 系统架构, 无服务器]
authors: qife
description: "本文详细剖析了2029年英国大选网站的技术架构，采用ASP.NET Core和Razor构建前端，基于Google Cloud Run实现无服务器部署，使用Firestore存储数据，并分享了云原生架构的设计思考与成本优化策略。"
---

# 技术概览
本文主要为场景设定用途。虽然内容没有特别出彩之处，但在探讨真正有趣的设计细节前，有必要先了解基础事实。

提醒：访问[https://election2029.uk](https://election2029.uk)可查看当前实现效果。

该网站具有以下显著特征：
- 纯只读架构：用户输入仅用于改变显示内容
- 数据量足够小，可全部加载到内存
- 在大选夜之前数据变化缓慢：选举公告前每天最多2-3次数据变更，竞选期间每天会有多个新投票和MRP数据，大选夜需要实时推送最新结果

## 技术栈选择
主要基于Google Cloud构建。作者坦言存在偏好，但未比较Azure或AWS的可行性。优势在于：
- 可直接使用自建的GCP库
- 可快速提交功能请求并自行修复
- 能向同事反馈Cloud Run和Cloud Build的使用体验

## 前端：ASP.NET Core与Razor
- 使用Razor进行HTML格式化，但未采用标准MVC或Razor Pages模式
- 采用类似MVVM的模式（作者自认可能不符合标准实践）
- 基于.NET 9开发，计划随版本更新升级（预计大选夜将运行.NET 13）
- 仅使用少量JavaScript图形库，无前端框架（Bootstrap/Angular/React等）

## 部署：Google Cloud Run
- 2024年站点运行于GKE集群，现已迁移至Cloud Run
- 作者最终接受了无服务器理念，虽然带来设计挑战但整体满意
- 域名和HTTPS证书配置变得极其简单（对业余项目至关重要）
- 当前使用GCP承诺使用折扣，预计日常运营成本可控制在1美元/天以下

## 构建/部署：Google Cloud Build
- 与Cloud Run和GitHub深度集成
- 标准流程：编码→提交→推送→按需部署

## 数据存储：Firestore
- 文档数据库，但实际使用方式接近blob存储
- 当前方案几乎零成本
- 未来可能尝试改用Google Cloud Storage进行比较

## 源代码管理：GitHub
- 私有仓库（因包含投票机构的Excel/PDF原始数据）
- 考虑未来将数据文件迁移至GCS存储

## 数据源
当前使用的数据源包括：
- Democracy Club（候选人/选票/结果数据）
- 议会成员API（政党变更数据）
- 国家统计局（邮编信息）
- 维基百科选举投票页面
- 多家投票机构授权使用的投票数据
```